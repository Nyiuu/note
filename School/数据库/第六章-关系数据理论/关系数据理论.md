# 第六章 关系数据理论

本文档根据《数据库系统概论》第六章"关系数据理论"的思维导图进行组织，旨在系统性地讲解数据库规范化理论的核心概念。

---

## 6.1 问题的提出 (了解)
- **数据冗余 (Data Redundancy)**: 同样的数据在多个地方重复存储。
- **操作异常 (Anomalies)**: 由数据冗余所导致的问题。
    - **插入异常 (Insertion Anomaly)**: 该录入的信息，因不满足表结构要求而无法录入。
    - **删除异常 (Deletion Anomaly)**: 因删除某条信息，而导致不该丢失的信息一并丢失。
    - **更新异常 (Update Anomaly)**: 更新一个数据，需要修改多个地方，容易导致数据不一致。

---

## 6.2 规范化 (重点, 难点, 考点)

### 6.2.1 函数依赖 (Functional Dependency - FD) (重点, 考点)
- **定义**: 设R(U)是一个关系模式，X和Y是U的子集。若对于R的任意一个可能的关系r，r中不存在两个元组，它们在X上的属性值相同，而在Y上的属性值不同，则称"X函数确定Y"或"Y函数依赖于X"，记作 `X → Y`。
- **平凡与非平凡函数依赖**:
    - 如果 `X → Y` 且 `Y ⊆ X`，则称其为**平凡函数依赖**。
    - 否则，为**非平凡函数依赖**。
- **完全与部分函数依赖**:
    - 在 `X → Y` 中，如果X的任何一个真子集X'都不能函数确定Y (`X' ↛ Y`)，则称Y对X**完全函数依赖**。
    - 否则，称Y对X**部分函数依赖**。
- 部分函数依赖 和 传递函数依赖 是两种最主要的“坏”的函数依赖，它们是导致数据冗余的根源。
### 6.2.2 码 (Key) (重点)
- **候选码 (Candidate Key)**: 若关系中的某一属性组的值能唯一地标识一个元组，而其任何真子集都不能，则称该属性组为候选码。
- **主码 (Primary Key)**: 若一个关系有多个候选码，则选定其中一个为主码。
- **主属性 (Prime Attribute)**: 包含在**任何**一个候选码中的属性。
- **非主属性 (Non-prime Attribute)**: 不包含在任何候选码中的属性。

### 6.2.3 范式 (Normal Form - NF) (重点, 考点)
- **概念**: 符合某一种级别的关系模式的集合，表示其规范化的程度。级别越高，规范化程度越高。
- **主要范式**: `1NF ⊃ 2NF ⊃ 3NF ⊃ BCNF`

### 6.2.4 第二范式 (2NF) (难点, 考点)
- **定义**: 若关系模式R∈1NF，并且每一个**非主属性**都**完全函数依赖**于任何一个候选码，则R∈2NF。
- **核心思想**: 消除非主属性对码的部分函数依赖。

### 6.2.5 第三范式 (3NF) (重点, 考点)
- **定义**: 若关系模式R∈2NF，并且R中没有非主属性对候选码的**传递函数依赖**，则R∈3NF。
- **核心思想**: 消除非主属性对码的传递函数依赖。

### 6.2.6 BCNF (Boyce-Codd Normal Form) (难点, 考点)
- **定义**: 若关系模式R∈1NF，若X→Y且Y不包含于X时，X必含有码，则R∈BCNF。
- **核心思想**: 消除**任何属性**（包括主属性）对码的传递依赖和部分依赖。

### 6.2.7 多值依赖 (Multivalued Dependency - MVD) (难点)
- **定义**: 当关系R(U)中，对于X和Y的子集，U=X∪Y∪Z（Z=U-X-Y），如果对于给定的X值，有一组Y值与之对应，且这组Y值与R中其他属性Z无关，则称Y多值依赖于X。

### 6.2.8 第四范式 (4NF) (难点, 选学)
- **定义**: 关系模式R∈1NF，如果对于R的每个非平凡多值依赖 `X →→ Y`，X都含有码，则R∈4NF。
- **核心思想**: 消除非主属性对码的多值依赖。

### 6.2.9 规范化小结 (重点)
- **目标**: 将一个低规范化级别的关系，通过**模式分解**，转换为若干个高规范化级别的关系模式的集合。这个过程是有理论依据的，要遵循特定原则。

---

## 6.3 数据依赖的公理系统 (难点)
- **Armstrong公理系统**:
    - **自反律**: 若 `Y ⊆ X ⊆ U`，则 `X → Y` 成立。
    - **增广律**: 若 `X → Y`，则 `XZ → YZ`。
    - **传递律**: 若 `X → Y` 且 `Y → Z`，则 `X → Z`。

---

## 6.4 模式的分解 (难点, 选学)

### 6.4.1 模式分解的三个定义 (难点)
- 分解是将一个关系模式R分解成若干个关系模式的集合ρ={R1, R2, ..., Rk}。

### 6.4.2 分解的无损连接性和保持函数依赖性 (难点, 考点)
- **无损连接 (Lossless Join)**: 分解后的关系能通过自然连接恢复出原始关系的所有信息，不增多也不减少。
- **保持函数依赖 (Dependency Preservation)**: 原始关系中的所有函数依赖，在分解后的各个关系中依然能体现出来。

### 6.4.3 模式分解的算法 (难点, 考点)
- 存在特定的算法，可以将一个关系模式分解为满足特定范式（如3NF或BCNF），同时具备无损连接性和保持函数依赖性（或其中之一）。 